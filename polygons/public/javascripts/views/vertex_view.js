// Generated by CoffeeScript 1.6.3
(function() {
  define(["underscore", "backbone", "collections/vertex_list"], function(_, Backbone, model) {
    var VertexView, ctx;
    ctx = canvas.getContext("2d");
    canvas.width = canvas.parentElement.offsetWidth;
    canvas.height = canvas.parentElement.offsetHeight;
    VertexView = (function() {
      function VertexView() {
        model.on("add", this.render, this);
        model.on("change", this.render, this);
        model.on("remove", this.render, this);
      }

      VertexView.prototype.render = function() {
        var prev, self;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        model.sort(model);
        self = this;
        ctx.beginPath();
        prev = model.last();
        ctx.moveTo(prev.get("x"), prev.get("y"));
        model.each(function(curr) {
          return ctx.lineTo(curr.get("x"), curr.get("y"));
        });
        ctx.closePath();
        ctx.fillStyle = "#ccc";
        ctx.fill();
        ctx.stroke();
        return model.each(this.render_vertex);
      };

      VertexView.prototype.render_vertex = function(vertex) {
        var radius, x, y;
        x = vertex.get("x");
        y = vertex.get("y");
        radius = vertex.get("radius");
        ctx.beginPath();
        ctx.arc(x, y, radius, 0, 2 * Math.PI);
        ctx.closePath();
        ctx.fillStyle = "#000";
        return ctx.fill();
      };

      return VertexView;

    })();
    return VertexView;
  });

}).call(this);
